<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>⏱ טיימר משימות</title>
    <style>
        body { font-family: Arial, sans-serif; direction: rtl; margin: 40px; }
        h1 { color: #333; }
        form { margin-bottom: 20px; }
        input { padding: 5px; margin: 5px; }
        button, a {
            padding: 5px 10px; margin: 2px;
            background: #007bff; color: white;
            text-decoration: none; border-radius: 4px;
        }
        a:hover, button:hover { background: #0056b3; }
        .done { color: green; }
        .active { color: red; }
        .paused { color: orange; }
    </style>
</head>
<body>
    <h1>⏱ טיימר משימות</h1>

    <form method="POST" action="{{ url_for('add_task') }}">
        <input type="text" name="name" placeholder="שם משימה" required>
        <input type="number" name="duration" placeholder="זמן (דקות)" required>
        <button type="submit">➕ הוסף משימה</button>
    </form>

    <h2>📋 רשימת משימות</h2>
    <ul>
    {% for task in tasks %}
        <li>
            <b>{{ task.name }}</b>
            {% if task.duration_minutes %}
                (⏱ {{ task.duration_minutes }} דקות)
            {% endif %}
            - 
            {% if task.status == "פעילה" %}
                <span class="active">פעילה</span>
            {% elif task.status == "מושהית" %}
                <span class="paused">מושהית</span>
            {% elif task.status == "הסתיימה" %}
                <span class="done">הסתיימה</span>
            {% else %}
                <span>ממתינה</span>
            {% endif %}

            {% if task.start_time and task.end_time %}
                <br>⏳ מתחיל ב: {{ task.start_time.strftime("%H:%M") }}
                | 🕒 מסתיים ב: {{ task.end_time.strftime("%H:%M") }}
            {% endif %}

            <div>
                {% if task.status == "ממתינה" %}
                    <a href="{{ url_for('start_task', task_id=task.id) }}">▶️ התחל</a>
                {% elif task.status == "פעילה" %}
                    <a href="{{ url_for('pause_task', task_id=task.id) }}">⏸ השהה</a>
                    <a href="{{ url_for('finish_task', task_id=task.id) }}">⏹ סיים</a>
                {% elif task.status == "מושהית" %}
                    <a href="{{ url_for('resume_task', task_id=task.id) }}">▶️ המשך</a>
                    <a href="{{ url_for('finish_task', task_id=task.id) }}">⏹ סיים</a>
                {% endif %}
            </div>
        </li>
    {% endfor %}
    </ul>
</body>
</html>
